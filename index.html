<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>اختباري - اعرف ياقوت</title>
  
<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

* {
  box-sizing: border-box;
  font-family: 'Cairo', sans-serif;
}


body {
  background-image: url('bg.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  margin: 0;
  background-color: #0e0e0e;
  color: white;
  overflow-x: hidden;
}

.container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  padding: 20px;
  animation: fadeIn 1s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.card {
  background: linear-gradient(135deg, #1c1c1c 30%, #2c2c2c 100%);
  border-radius: 20px;
  padding: 30px;
  width: 100%;
  max-width: 400px;
  box-shadow: 0 0 30px rgba(0, 255, 200, 0.1);
  text-align: center;
  margin: 10px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  animation: popIn 0.5s ease;
}

@keyframes popIn {
  0% { transform: scale(0.9); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

.card:hover {
  transform: scale(1.02);
  box-shadow: 0 0 40px rgba(0, 255, 200, 0.2);
}

h1, h2 {
  margin-bottom: 20px;
}

button, .option {
  padding: 12px 20px;
  margin: 10px 0;
  border: none;
  border-radius: 10px;
  background: linear-gradient(45deg, #00c6ff, #0072ff);
  color: white;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.3s ease, transform 0.2s ease;
  width: 100%;
  font-weight: bold;
}

button:hover, .option:hover {
  background: linear-gradient(45deg, #0072ff, #00c6ff);
  transform: scale(1.03);
}

input[type="text"] {
  padding: 12px;
  border-radius: 10px;
  width: 100%;
  border: 1px solid #444;
  margin-bottom: 20px;
  background-color: #222;
  color: white;
}

.hidden {
  display: none;
}

    
body {
  background-image: url('bg.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

      margin: 0;
      font-family: 'Cairo', sans-serif;
      background: url('https://images.unsplash.com/photo-1532274402917-5aadf881bdfb?auto=format&fit=crop&w=1350&q=80') no-repeat center center fixed;
      background-size: cover;
      color: white;
    }

    .container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      backdrop-filter: brightness(30%) blur(3px);
      padding: 20px;
    }

    .card {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 30px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
      text-align: center;
      margin: 10px;
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: scale(1.02);
    }

    h1, h2 {
      margin-bottom: 20px;
    }

    button, .option {
      padding: 10px 20px;
      margin: 10px 0;
      border: none;
      border-radius: 10px;
      background-color: #ffffff10;
      color: white;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s ease;
      width: 100%;
    }

    .option:hover, button:hover {
      background-color: #ffffff30;
    }

    .hidden {
      display: none;
    }
  
@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}
.question-card {
  animation: fadeIn 0.5s ease-in-out;
}
</style>

</head>

<body>


<div id="name-screen" class="container hidden" style="text-align:center;">
  <div class="card">
    <h2>👋 عرفنا بنفسك</h2>
    <input type="text" id="name-input" placeholder="اكتب اسمك" style="padding:10px; margin-top: 10px; border-radius: 8px; border:none; width: 80%; max-width: 300px;"><br>
    <button class="btn" onclick="submitName()" style="margin-top: 15px;">استمرار</button>
  </div>
</div>

<div id="start-screen" class="container" style="text-align:center; padding-top:30vh; animation: fadeIn 2s;">
  <h1 style="font-size: 3em; color: #ff3333;">🧠 اختباري</h1>
  <p style="color: #ccc; margin-top: 10px;">هل تعرف ياقوت فعلاً؟</p>
  <button class="btn" onclick="startQuiz()" style="margin-top: 30px;">ابدأ الاختبار</button>
    <button class="btn" onclick="showSavedResult()" style="margin-top: 10px;">📊 عرض نتيجتي</button>
</div>

  <audio id="correct-sound" src="correct.mp3"></audio>
  <audio id="wrong-sound" src="wrong.mp3"></audio>

  <div id="app" class="container">
    <div id="start-screen" class="card">
      <h1>اختباري</h1>
      <p>اختبار: قد إيه تعرف ياقوت؟</p>
      <input id="username" type="text" placeholder="اكتب اسمك" style="padding:10px; border-radius:10px; width:100%; border:none; margin-bottom:20px;">
      <button onclick="startQuiz()">ابدأ</button>
    </div>
    <div id="question-screen" class="card hidden">
      <h2 id="question-text"></h2>
      <div id="options"></div>
    </div>
    <div id="result-screen" class="card hidden">
      <h2 id="result-text"></h2>
      <button onclick="location.reload()">العب تاني</button>
    </div>
  </div>

  

<script>

function startQuiz() {
  document.getElementById('start-screen').classList.add('hidden');
  document.getElementById('name-screen').classList.remove('hidden');
}


// منع إعادة الاختبار

window.onload = () => {
  const done = localStorage.getItem("quiz_done");
  const savedResult = localStorage.getItem("quiz_result");

  if (done && savedResult) {
    const resultCard = `
      <div class="card" style="margin-top:20px;">
        <h3>📊 نتيجتك السابقة:</h3>
        <p>${savedResult}</p>
      </div>
    `;
    document.getElementById('start-screen').classList.remove('hidden');
    document.getElementById('start-screen').innerHTML += resultCard;
    document.getElementById('start-container').classList.add('hidden');
    document.getElementById('question-screen').classList.add('hidden');
    document.getElementById('result-screen').classList.add('hidden');
    document.getElementById('leaderboard-screen').classList.add('hidden');
  }
};
</p>
    </div>
  `;
  document.getElementById('start-container').classList.add('hidden');
  document.getElementById('question-screen').classList.add('hidden');
  document.getElementById('result-screen').classList.add('hidden');
  document.getElementById('leaderboard-screen').classList.add('hidden');
}

    document.body.innerHTML = `
      <div class="container">
        <div class="card">
          <h2>انت خلاص جاوبت الاختبار ✅</h2>
          <p>${savedResult}</p>
          <p style="color:gray">ماتقدرش تعيده تاني 😎</p>
        </div>
      </div>
    `;
  }
};

    const questions = [
      { q: "أكتر حاجة ياقوت بيحب يعملها لما يكون فاضي؟", a: "فيديو جيمز", options: ["أنام", "فيديو جيمز", "أتفرج على فيلم", "أنزل أتمشى"] },
      { q: "إيه أكتر أكلة ياقوت بيحبها؟", a: "البشاميل", options: ["البشاميل", "الكشري", "السمك", "المحشي"] },
      { q: "إيه أكتر لون ياقوت بيحبه؟", a: "الأسود", options: ["أبيض", "أسود", "أحمر", "أزرق"] },
      { q: "نوع الأغاني اللي ياقوت بيحبها أكتر؟", a: "حزين", options: ["رومانسي", "حزين", "مش بحب الأغاني"] },
      { q: "مين الفنان المفضل عند ياقوت؟", a: "سانتا", options: ["عمرو دياب", "إليسا", "سانتا", "اليوسف"] },
      { q: "مين لاعب الكورة المفضل عند ياقوت؟", a: "ديبروين", options: ["ديبروين", "محمد صلاح", "كريستيانو", "نيمار"] },
      { q: "أكتر وقت ياقوت بيحب يقعد فيه لوحده؟", a: "بالليل", options: ["الصبح بدري", "بعد الفطار", "بالليل", "مش بيحب يقعد لوحده"] },
      { q: "ياقوت بيشرب إيه؟", a: "شاي بالنعناع", options: ["قهوة", "شاي بالنعناع", "عصير مانجا", "عصير ليمون"] },
      { q: "إيه أكتر نوع أفلام ياقوت بيحب يتفرج عليه؟", a: "أكشن", options: ["أكشن", "رومانسي", "رعب", "كوميدي"] },
      { q: "أكتر حاجة ممكن تزعّل ياقوت؟", a: "الكذب", options: ["الكذب", "التجاهل", "النقد", "المقارنة بالناس"] },
      { q: "ياقوت يفضل الشتاء ولا الصيف؟", a: "شتاء", options: ["شتاء", "صيف", "ملوش في الجو", "بيحب الاتنين"] },
      { q: "ياقوت بيحب يتكلم عن نفسه؟", a: "لأ", options: ["آه", "لأ", "بس لو مرتاح", "نادرًا"] },
      { q: "إيه أكتر حاجة ياقوت بيضيع فيها وقته؟", a: "سوشيال ميديا", options: ["سوشيال ميديا", "أكل", "نوم", "تفكير"] }
    ];

    let currentQuestion = 0;
    let score = 0;
    let playerName = "";

    
function startQuiz() {
  document.getElementById('start-screen').classList.add('hidden');
  document.getElementById('name-screen').classList.remove('hidden');
}


    function loadQuestion() {
      const q = questions[currentQuestion];
      document.getElementById('question-text').innerText = q.q;
      const optionsContainer = document.getElementById('options');
      optionsContainer.innerHTML = "";
      q.options.forEach(option => {
        const btn = document.createElement('button');
        btn.innerText = option;
        btn.className = 'option';
        btn.onclick = () => handleAnswer(option);
        optionsContainer.appendChild(btn);
      });
    }

    function handleAnswer(selected) {
      const correct = questions[currentQuestion].a;
      if (selected === correct) score++;
      currentQuestion++;
      if (currentQuestion < questions.length) {
        loadQuestion();
      } 
else {
    document.getElementById('wrong-sound').play();

        showResult();
      }
    }

    
function showResult() {
  document.getElementById('question-screen').classList.add('hidden');
  document.getElementById('result-screen').classList.remove('hidden');

  let result = "";
  if (score <= 4) {
    result = `يا ${playerName}... إنت متعرفش ياقوت خالص 💀`;
  } else if (score <= 9) {
    result = `يا ${playerName}... يعني نص نص، محتاج تتقربله 😬`;
  } else if (score <= 12) {
    result = `يا ${playerName}... إنت عارفه كويس جدًا 💪`;
  } else {
    result = `يا ${playerName}... إنت عشرة ياقوت 💎🔥`;
  }

  document.getElementById('result-text').innerText = result;

  
// حفظ النتيجة ومنع الإعادة
localStorage.setItem("quiz_done", "true");
localStorage.setItem("quiz_result", result);

// إرسال النتيجة إلى Google Form

  const formUrl = "https://docs.google.com/forms/d/e/1FAIpQLSel0cJ6mOI-D0mUdgeHpgtxfa_AqR81VjhB5p5g5_b2qx6AXQ/formResponse?";
  const fullNameAndScore = `${playerName} - ${score} من ${questions.length}`;
  fetch(formUrl + `entry.1369585106=${encodeURIComponent(fullNameAndScore)}`, { method: "POST", mode: "no-cors" });

  // عرض الأسئلة مع إجابات المستخدم
  const detailedDiv = document.getElementById('detailed-result');
  detailedDiv.innerHTML = "";
  userAnswers.forEach((answer, index) => {
    const q = questions[index];
    const isCorrect = answer === q.answer;
    detailedDiv.innerHTML += `
      <div style="text-align:right; margin-bottom:15px;">
        <strong>سؤال ${index + 1}:</strong> ${q.question}<br>
        <span style="color:${isCorrect ? 'lightgreen' : 'orangered'}">🔸 إجابتك: ${answer}</span><br>
        <span style="color:lightblue">✔️ الإجابة الصحيحة: ${q.answer}</span>
      </div>
    `;
  });
}
- ${score} من ${questions.length}`;
  fetch(formUrl + `entry.1369585106=${encodeURIComponent(fullNameAndScore)}`, { method: "POST", mode: "no-cors" });

      document.getElementById('question-screen').classList.add('hidden');
      document.getElementById('result-screen').classList.remove('hidden');
      let result = "";
      if (score <= 4) {
        result = `يا ${playerName}... إنت متعرفش ياقوت خالص 💀`;
      } else if (score <= 9) {
        result = `يا ${playerName}... يعني نص نص، محتاج تتقربله 😬`;
      } else if (score <= 12) {
        result = `يا ${playerName}... إنت عارفه كويس جدًا 💪`;
      } 
else {
    document.getElementById('wrong-sound').play();

        result = `يا ${playerName}... إنت عشرة ياقوت 💎🔥`;
      }
      document.getElementById('result-text').innerText = result;
    }
  
function showLeaderboard() {
  document.getElementById("result-screen").classList.add("hidden");
  document.getElementById("leaderboard-screen").classList.remove("hidden");

  const leaderboardData = [
    { name: "سارة", score: 15 },
    { name: "علي", score: 13 },
    { name: "أحمد", score: 12 },
    { name: "نور", score: 10 },
    { name: playerName, score: score }
  ];

  leaderboardData.sort((a, b) => b.score - a.score);

  const list = document.getElementById("leaderboard-list");
  list.innerHTML = "";
  leaderboardData.forEach((entry, index) => {
    list.innerHTML += `<li style="margin: 5px 0;">${index + 1}. ${entry.name} - ${entry.score} نقطة</li>`;
  });
}

function goBackToResult() {
  document.getElementById("leaderboard-screen").classList.add("hidden");
  document.getElementById("result-screen").classList.remove("hidden");
}


function showSavedResult() {
  const result = localStorage.getItem("quiz_result") || "مفيش نتيجة محفوظة";
  document.body.innerHTML = `
    <div class="container">
      <div class="card">
        <h2>📊 نتيجتك</h2>
        <p>${result}</p>
        <button class="btn" onclick="window.location.reload()">🔄 ارجع</button>
      </div>
    </div>
  `;
}

function submitName() {
  const input = document.getElementById("name-input").value.trim();
  if (!input) {
    alert("من فضلك اكتب اسمك الأول");
    return;
  }
  playerName = input;
  document.getElementById("name-screen").classList.add("hidden");
  document.getElementById("start-container").classList.remove("hidden");
}

</script>


<div id="leaderboard-screen" class="container hidden" style="text-align: right;">
  <div class="card">
    <h2>👑 الترتيب</h2>
    <ul id="leaderboard-list" style="list-style: none; padding: 0;"></ul>
    <button class="btn" onclick="goBackToResult()">⬅️ ارجع للنتيجة</button>
  </div>
</div>

</body>
</html>
